kango.ui.PopupOpenParams={url:"",width:0,height:0};kango.ui.Popup=function(){kango.oop.mixin(this,kango.EventTarget.prototype);kango.oop.mixin(this,new kango.EventTarget)};
kango.ui.Popup.prototype={_popupWnd:null,open:function(a){0!=a.url.indexOf("http")&&(a.url=kango.io.getExtensionFileUrl(a.url));this.close();a.kango=kango;var b=kango.chromeWindows.getMostRecentChromeWindow();this._popupWnd=b.openDialog(kango.io.getExtensionFileUrl("kango-ui/popup_window.xul"),"","chrome=yes,dependent=yes,width="+a.width+",height="+a.height,{wrappedJSObject:a});var d=this,c=function(){b.removeEventListener("focus",c,!0);b.removeEventListener("unload",c,!0);d.close()};b.addEventListener("focus",
c,!0);b.addEventListener("unload",c,!0);this._popupWnd.addEventListener("load",function(a){a.target.getElementById("frame").addEventListener("DOMContentLoaded",function(a){d.fireEvent("PopupDocumentComplete",{window:a.target.defaultView.wrappedJSObject})},!0)},!0)},close:function(){null!=this._popupWnd&&(this._popupWnd.close(),this._popupWnd=null)}};
